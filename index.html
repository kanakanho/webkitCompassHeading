<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <link rel="icon" type="image/svg+xml" href="/vite.svg" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>webkitcompassheading</title>
    </head>
    <body>
        <button id="start">Start</button>
        <hr />
        <p id="heading"></p>
        <hr />
        <p id="alpha"></p>
        <p id="beta"></p>
        <p id="gamma"></p>
    </body>
    <script>
        const startButton = document.getElementById("start");
        const headingDisplay = document.getElementById("heading");

        startButton.addEventListener("click", () => {
            if (typeof DeviceOrientationEvent.requestPermission === "function") {
                DeviceOrientationEvent.requestPermission()
                    .then((response) => {
                        if (response === "granted") {
                            console.log("Permission granted for device orientation.");
                        } else {
                            console.log("Permission denied for device orientation.");
                        }
                    })
                    .catch((error) => {
                        console.error("Error requesting device orientation permission:", error);
                    });
            } else {
                console.log("DeviceOrientationEvent.requestPermission is not supported.");
            }

            window.addEventListener("deviceorientation", (event) => {
                if (event.webkitCompassHeading !== undefined) {
                    headingDisplay.textContent = `Compass Heading: ${event.webkitCompassHeading}`;
                    console.log(`Compass Heading: ${event.webkitCompassHeading}`);
                } else {
                    console.log("webkitCompassHeading is not supported on this device.");
                }
                if (event.alpha !== null) {
                    document.getElementById("alpha").textContent = `Alpha: ${event.alpha}`;
                }
                if (event.beta !== null) {
                    document.getElementById("beta").textContent = `Beta: ${event.beta}`;
                }
                if (event.gamma !== null) {
                    document.getElementById("gamma").textContent = `Gamma: ${event.gamma}`;
                }
            });
        });
    </script>
</html>
